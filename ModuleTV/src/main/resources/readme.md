线上 5m   pv/uv  freeswitch
{'spark.aispeech.job.source':'kafka',
'spark.aispeech.job.sink':'es',
'spark.aispeech.write.es.timeColumn':'beginTime',
'spark.aispeech.job.log.level':'WARN',
'spark.aispeech.trigger.time':'5 minutes',
'spark.aispeech.data.interval':'5 minutes',
'spark.aispeech.data.watermark.delay':'20 seconds',
'spark.aispeech.checkpoint':'/user/rsbj_ba_backend/business/',
'spark.aispeech.data.query.jobs':'{"pv_baserver":{"kind":"PV","select":{"module":"$.module","eventName":"$.eventName","sessionId":"$.message.message.input.externalSessionId","logTime":"$.logTime"},
"filter":{"module":"baserver","eventName":"sys_input_output"},"group":"module,eventName","distinct":""},
"uv_baserver":{"kind":"UV","select":{"module":"$.module","eventName":"$.eventName","sessionId":"$.message.message.input.externalSessionId","logTime":"$.logTime"},
"filter":{"module":"baserver","eventName":"sys_input_output"},"group":"module,eventName","distinct":"sessionId"},
"pv_freeswitch":{"kind":"PV","select":{"module":"$.module","eventName":"$.eventName","sessionId":"$.sessionId","logTime":"$.logTime"},
"filter":{"module":"freeswitch","eventName":"get_response_from_ba"},"group":"module,eventName","distinct":""},
"uv_freeswitch":{"kind":"UV","select":{"module":"$.module","eventName":"$.eventName","sessionId":"$.sessionId","logTime":"$.logTime"},
"filter":{"module":"freeswitch","eventName":"charge"},"group":"module,eventName","distinct":"sessionId"}}',
'spark.aispeech.read.kafka.startOffsets.pv_baserver':'latest',
'spark.aispeech.read.kafka.startOffsets.uv_baserver':'latest',
'spark.aispeech.read.kafka.startOffsets.pv_freeswitch':'latest',
'spark.aispeech.read.kafka.startOffsets.uv_freeswitch':'latest',
'spark.aispeech.read.kafka.maxOffsetsPerTrigger':'6000000',
'spark.aispeech.read.kafka.failOnDataLoss':'false',
'spark.aispeech.read.kafka.brokers':'10.24.1.10:6667,10.24.1.21:6667,10.24.1.32:6667,10.24.1.43:6667',
'spark.aispeech.read.kafka.topics':'ba-prod-trace-log',
'spark.aispeech.write.es.nodes':'10.24.1.44,10.24.1.23,10.24.1.24',
'spark.aispeech.write.es.port':'9200',
'spark.aispeech.write.es.type':'summary',
'spark.aispeech.write.es.index':'business_stats-',
'spark.monitor.urls':'https://oapi.dingtalk.com/robot/send?access_token=0c44f10f6b0a02b06838010851293c2b8c61cb4e2e3849bcbb395172e72988a2',
'spark.memory.fraction':'0.8',
'spark.memory.storageFraction':'0.2',
'spark.memory.offHeap.enabled':'true',
'spark.memory.offHeap.size':'2048mb',
'spark.sql.shuffle.partitions':'1',
'spark.yarn.executor.memoryOverhead':'2048mb',
'spark.yarn.driver.memoryOverhead':'2048mb',
'spark.cleaner.periodicGC.interval':'15min',
'spark.rdd.compress':'true',
'spark.network.timeout':'300s',
'spark.driver.extraJavaOptions':'-XX:+UseConcMarkSweepGC -XX:+UseParNewGC',
'spark.executor.extraJavaOptions':'-XX:+UseConcMarkSweepGC -XX:+UseParNewGC',
'spark.serializer':'org.apache.spark.serializer.KryoSerializer',
'spark.scheduler.listenerbus.eventqueue.size':'100000'}


线上 5m  pid  pv
{'spark.aispeech.job.source':'kafka',
'spark.aispeech.job.sink':'es',
'spark.aispeech.write.es.timeColumn':'beginTime',
'spark.aispeech.job.log.level':'WARN',
'spark.aispeech.trigger.time':'5 minutes',
'spark.aispeech.checkpoint':'/user/rsbj_ba_backend/business/',
'spark.aispeech.queryName':'pv_pid_baserver',
'spark.aispeech.data.module':'baserver',
'spark.aispeech.data.eventName':'sys_input_output',
'spark.aispeech.data.interval':'5 minutes',
'spark.aispeech.data.watermark.delay':'20 seconds',
'spark.aispeech.read.kafka.startOffsets':'latest',
'spark.aispeech.read.kafka.maxOffsetsPerTrigger':'6000000',
'spark.aispeech.read.kafka.failOnDataLoss':'false',
'spark.aispeech.read.kafka.brokers':'10.24.1.10:6667,10.24.1.21:6667,10.24.1.32:6667,10.24.1.43:6667',
'spark.aispeech.read.kafka.topics':'ba-prod-trace-log',
'spark.aispeech.write.es.nodes':'10.24.1.44,10.24.1.23,10.24.1.24',
'spark.aispeech.write.es.port':'9200',
'spark.aispeech.write.es.type':'summary',
'spark.aispeech.write.es.index':'business_stats-',
'spark.monitor.urls':'https://oapi.dingtalk.com/robot/send?access_token=0c44f10f6b0a02b06838010851293c2b8c61cb4e2e3849bcbb395172e72988a2',
'spark.memory.fraction':'0.8',
'spark.memory.storageFraction':'0.2',
'spark.memory.offHeap.enabled':'true',
'spark.memory.offHeap.size':'2048mb',
'spark.sql.shuffle.partitions':'1',
'spark.yarn.executor.memoryOverhead':'2048mb',
'spark.yarn.driver.memoryOverhead':'2048mb',
'spark.cleaner.periodicGC.interval':'15min',
'spark.rdd.compress':'true',
'spark.network.timeout':'300s',
'spark.driver.extraJavaOptions':'-XX:+UseConcMarkSweepGC -XX:+UseParNewGC',
'spark.executor.extraJavaOptions':'-XX:+UseConcMarkSweepGC -XX:+UseParNewGC',
'spark.serializer':'org.apache.spark.serializer.KryoSerializer',
'spark.scheduler.listenerbus.eventqueue.size':'100000'}


5m   source  pv  baserver_source_pv

{'spark.aispeech.job.source':'kafka',
'spark.aispeech.job.sink':'es',
'spark.aispeech.write.es.timeColumn':'beginTime',
'spark.aispeech.job.log.level':'WARN',
'spark.aispeech.queryName':'pv_source_baserver',
'spark.aispeech.trigger.time':'5 minutes',
'spark.aispeech.checkpoint':'/user/rsbj_ba_backend/business/',
'spark.aispeech.data.module':'baserver',
'spark.aispeech.data.eventName':'sys_input_output',
'spark.aispeech.data.interval':'5 minutes',
'spark.aispeech.data.watermark.delay':'20 seconds',
'spark.aispeech.read.kafka.startOffsets':'latest',
'spark.aispeech.read.kafka.maxOffsetsPerTrigger':'6000000',
'spark.aispeech.read.kafka.failOnDataLoss':'false',
'spark.aispeech.read.kafka.brokers':'10.24.1.10:6667,10.24.1.21:6667,10.24.1.32:6667,10.24.1.43:6667',
'spark.aispeech.read.kafka.topics':'ba-prod-trace-log',
'spark.aispeech.write.es.nodes':'10.24.1.44,10.24.1.23,10.24.1.24',
'spark.aispeech.write.es.port':'9200',
'spark.aispeech.write.es.type':'summary',
'spark.aispeech.write.es.index':'business_stats-',
'spark.monitor.urls':'https://oapi.dingtalk.com/robot/send?access_token=0c44f10f6b0a02b06838010851293c2b8c61cb4e2e3849bcbb395172e72988a2',
'spark.memory.fraction':'0.8',
'spark.memory.storageFraction':'0.2',
'spark.memory.offHeap.enabled':'true',
'spark.memory.offHeap.size':'2048mb',
'spark.sql.shuffle.partitions':'1',
'spark.yarn.executor.memoryOverhead':'2048mb',
'spark.yarn.driver.memoryOverhead':'2048mb',
'spark.cleaner.periodicGC.interval':'15min',
'spark.rdd.compress':'true',
'spark.network.timeout':'300s',
'spark.driver.extraJavaOptions':'-XX:+UseConcMarkSweepGC -XX:+UseParNewGC',
'spark.executor.extraJavaOptions':'-XX:+UseConcMarkSweepGC -XX:+UseParNewGC',
'spark.serializer':'org.apache.spark.serializer.KryoSerializer'}